"use strict";
const electron = require("electron");
const uuid = require("uuid");
const fetchNotes = async () => {
  return await db("note").select("*");
};
const updateNote = async (id, updates) => {
  return await db("note").where("id", id).update({
    ...updates,
    updated: Date.now()
  });
};
const deleteNote = async (id) => {
  return await db("note").where("id", id).del();
};
const createNote = async () => {
  const note = {
    id: uuid.v4(),
    title: "",
    content: "",
    created: Date.now(),
    updated: Date.now()
  };
  await db("note").insert(note);
  return note;
};
const saveNote = async (id, updates) => {
  const note = await getNote(id);
  if (!note)
    return null;
  const updatedNote = {
    ...note,
    ...updates,
    updated: Date.now()
  };
  await db("note").where("id", id).update(updatedNote);
  return updatedNote;
};
const getNote = async (id) => {
  const notes = await db("note").where("id", id);
  return notes.length ? notes[0] : null;
};
const NotesApi = {
  fetchNotes,
  updateNote,
  createNote,
  getNote,
  deleteNote,
  saveNote
};
const db = require("knex")({
  client: "sqlite3",
  // todo: change to better-sqlite3
  connection: {
    filename: "./mydb.sqlite"
  },
  useNullAsDefault: true
});
console.log("creating the tables...");
console.log("creating notes table...");
db.schema.hasTable("note").then((exists) => {
  console.log("notes table exists?", exists);
  if (!exists) {
    return db.schema.createTable("note", (table) => {
      table.string("id").primary().unique().notNullable();
      table.string("title");
      table.string("content");
      table.integer("created").notNullable().defaultTo(Date.now());
      table.integer("updated").notNullable().defaultTo(Date.now());
    }).then(() => {
      console.log("created table note");
    }).catch((err) => {
      console.log("error creating table note", err);
    });
  }
});
const api = { NotesApi };
electron.contextBridge.exposeInMainWorld("api", api);
function domReady(condition = ["complete", "interactive"]) {
  return new Promise((resolve) => {
    if (condition.includes(document.readyState)) {
      resolve(true);
    } else {
      document.addEventListener("readystatechange", () => {
        if (condition.includes(document.readyState)) {
          resolve(true);
        }
      });
    }
  });
}
const safeDOM = {
  append(parent, child) {
    if (!Array.from(parent.children).find((e) => e === child)) {
      return parent.appendChild(child);
    }
  },
  remove(parent, child) {
    if (Array.from(parent.children).find((e) => e === child)) {
      return parent.removeChild(child);
    }
  }
};
function useLoading() {
  const className = `loaders-css__square-spin`;
  const styleContent = `
@keyframes square-spin {
  25% { transform: perspective(100px) rotateX(180deg) rotateY(0); }
  50% { transform: perspective(100px) rotateX(180deg) rotateY(180deg); }
  75% { transform: perspective(100px) rotateX(0) rotateY(180deg); }
  100% { transform: perspective(100px) rotateX(0) rotateY(0); }
}
.${className} > div {
  animation-fill-mode: both;
  width: 50px;
  height: 50px;
  background: #fff;
  animation: square-spin 3s 0s cubic-bezier(0.09, 0.57, 0.49, 0.9) infinite;
}
.app-loading-wrap {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #282c34;
  z-index: 9;
}
    `;
  const oStyle = document.createElement("style");
  const oDiv = document.createElement("div");
  oStyle.id = "app-loading-style";
  oStyle.innerHTML = styleContent;
  oDiv.className = "app-loading-wrap";
  oDiv.innerHTML = `<div class="${className}"><div></div></div>`;
  return {
    appendLoading() {
      safeDOM.append(document.head, oStyle);
      safeDOM.append(document.body, oDiv);
    },
    removeLoading() {
      safeDOM.remove(document.head, oStyle);
      safeDOM.remove(document.body, oDiv);
    }
  };
}
const { appendLoading, removeLoading } = useLoading();
domReady().then(appendLoading);
window.onmessage = (ev) => {
  ev.data.payload === "removeLoading" && removeLoading();
};
setTimeout(removeLoading, 4999);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uLy4uL2VsZWN0cm9uL3ByZWxvYWQvYXBpL25vdGVzQXBpLnRzIiwiLi4vLi4vZWxlY3Ryb24vcHJlbG9hZC9hcGkvaW5kZXgudHMiLCIuLi8uLi9lbGVjdHJvbi9wcmVsb2FkL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tIFwia25leFwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcblxuaW1wb3J0IHsgTm90ZSB9IGZyb20gXCJrbmV4L3R5cGVzL3RhYmxlc1wiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiLlwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE5vdGVzQXBpIHtcbiAgZmV0Y2hOb3RlczogKCkgPT4gUHJvbWlzZTxOb3RlW10+O1xuICB1cGRhdGVOb3RlOiAoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxOb3RlPikgPT4gUHJvbWlzZTxOb3RlPjtcbiAgY3JlYXRlTm90ZTogKCkgPT4gUHJvbWlzZTxOb3RlPjtcbiAgZ2V0Tm90ZTogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8Tm90ZSB8IG51bGw+O1xuICBkZWxldGVOb3RlOiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgc2F2ZU5vdGU6IChcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8Tm90ZT5cbiAgKSA9PiBQcm9taXNlPE5vdGUgfCBudWxsPjtcbn1cblxuY29uc3QgZmV0Y2hOb3RlcyA9IGFzeW5jICgpID0+IHtcbiAgcmV0dXJuIGF3YWl0IGRiKFwibm90ZVwiKS5zZWxlY3QoXCIqXCIpO1xufTtcblxuY29uc3QgdXBkYXRlTm90ZSA9IGFzeW5jIChcbiAgaWQ6IHN0cmluZyxcbiAgdXBkYXRlczogUGFydGlhbDxOb3RlPlxuKTogUHJvbWlzZTxOb3RlPiA9PiB7XG4gIHJldHVybiBhd2FpdCBkYihcIm5vdGVcIilcbiAgICAud2hlcmUoXCJpZFwiLCBpZClcbiAgICAudXBkYXRlKHtcbiAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICB1cGRhdGVkOiBEYXRlLm5vdygpLFxuICAgIH0pO1xufTtcblxuY29uc3QgZGVsZXRlTm90ZSA9IGFzeW5jIChpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gIHJldHVybiBhd2FpdCBkYihcIm5vdGVcIikud2hlcmUoXCJpZFwiLCBpZCkuZGVsKCk7XG59O1xuXG5jb25zdCBjcmVhdGVOb3RlID0gYXN5bmMgKCk6IFByb21pc2U8Tm90ZT4gPT4ge1xuICBjb25zdCBub3RlOiBOb3RlID0ge1xuICAgIGlkOiB1dWlkdjQoKSxcbiAgICB0aXRsZTogXCJcIixcbiAgICBjb250ZW50OiBcIlwiLFxuICAgIGNyZWF0ZWQ6IERhdGUubm93KCksXG4gICAgdXBkYXRlZDogRGF0ZS5ub3coKSxcbiAgfTtcblxuICBhd2FpdCBkYihcIm5vdGVcIikuaW5zZXJ0KG5vdGUpO1xuICByZXR1cm4gbm90ZTtcbn07XG5cbmNvbnN0IHNhdmVOb3RlID0gYXN5bmMgKFxuICBpZDogc3RyaW5nLFxuICB1cGRhdGVzOiBQYXJ0aWFsPE5vdGU+XG4pOiBQcm9taXNlPE5vdGUgfCBudWxsPiA9PiB7XG4gIGNvbnN0IG5vdGUgPSBhd2FpdCBnZXROb3RlKGlkKTtcbiAgaWYgKCFub3RlKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCB1cGRhdGVkTm90ZSA9IHtcbiAgICAuLi5ub3RlLFxuICAgIC4uLnVwZGF0ZXMsXG4gICAgdXBkYXRlZDogRGF0ZS5ub3coKSxcbiAgfTtcblxuICBhd2FpdCBkYihcIm5vdGVcIikud2hlcmUoXCJpZFwiLCBpZCkudXBkYXRlKHVwZGF0ZWROb3RlKTtcbiAgcmV0dXJuIHVwZGF0ZWROb3RlO1xufTtcblxuY29uc3QgZ2V0Tm90ZSA9IGFzeW5jIChpZDogc3RyaW5nKTogUHJvbWlzZTxOb3RlIHwgbnVsbD4gPT4ge1xuICBjb25zdCBub3RlczogTm90ZVtdID0gYXdhaXQgZGIoXCJub3RlXCIpLndoZXJlKFwiaWRcIiwgaWQpO1xuICByZXR1cm4gbm90ZXMubGVuZ3RoID8gbm90ZXNbMF0gOiBudWxsO1xufTtcblxuZXhwb3J0IGNvbnN0IE5vdGVzQXBpOiBOb3Rlc0FwaSA9IHtcbiAgZmV0Y2hOb3RlcyxcbiAgdXBkYXRlTm90ZSxcbiAgY3JlYXRlTm90ZSxcbiAgZ2V0Tm90ZSxcbiAgZGVsZXRlTm90ZSxcbiAgc2F2ZU5vdGUsXG59O1xuIiwiaW1wb3J0IHsgS25leCB9IGZyb20gXCJrbmV4XCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgTm90ZXNBcGkgfSBmcm9tIFwiLi9ub3Rlc0FwaVwiO1xuXG5leHBvcnQgY29uc3QgZGI6IEtuZXggPSByZXF1aXJlKFwia25leFwiKSh7XG4gIGNsaWVudDogXCJzcWxpdGUzXCIsIC8vIHRvZG86IGNoYW5nZSB0byBiZXR0ZXItc3FsaXRlM1xuICBjb25uZWN0aW9uOiB7XG4gICAgZmlsZW5hbWU6IFwiLi9teWRiLnNxbGl0ZVwiLFxuICB9LFxuICB1c2VOdWxsQXNEZWZhdWx0OiB0cnVlLFxufSk7XG5cbmRlY2xhcmUgbW9kdWxlIFwia25leC90eXBlcy90YWJsZXNcIiB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgTm90ZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBjcmVhdGVkPzogbnVtYmVyO1xuICAgIHVwZGF0ZWQ/OiBudW1iZXI7XG4gIH1cbiAgZXhwb3J0IGludGVyZmFjZSBUYWcge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGNyZWF0ZWQ/OiBudW1iZXI7XG4gICAgdXBkYXRlZD86IG51bWJlcjtcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgVGFibGVzIHtcbiAgICBub3RlOiBOb3RlO1xuICB9XG59XG5jb25zb2xlLmxvZyhcImNyZWF0aW5nIHRoZSB0YWJsZXMuLi5cIik7XG5cbmNvbnNvbGUubG9nKFwiY3JlYXRpbmcgbm90ZXMgdGFibGUuLi5cIik7XG5kYi5zY2hlbWEuaGFzVGFibGUoXCJub3RlXCIpLnRoZW4oKGV4aXN0cykgPT4ge1xuICBjb25zb2xlLmxvZyhcIm5vdGVzIHRhYmxlIGV4aXN0cz9cIiwgZXhpc3RzKTtcbiAgaWYgKCFleGlzdHMpIHtcbiAgICByZXR1cm4gZGIuc2NoZW1hXG4gICAgICAuY3JlYXRlVGFibGUoXCJub3RlXCIsICh0YWJsZSkgPT4ge1xuICAgICAgICB0YWJsZS5zdHJpbmcoXCJpZFwiKS5wcmltYXJ5KCkudW5pcXVlKCkubm90TnVsbGFibGUoKTtcbiAgICAgICAgdGFibGUuc3RyaW5nKFwidGl0bGVcIik7XG4gICAgICAgIHRhYmxlLnN0cmluZyhcImNvbnRlbnRcIik7XG4gICAgICAgIHRhYmxlLmludGVnZXIoXCJjcmVhdGVkXCIpLm5vdE51bGxhYmxlKCkuZGVmYXVsdFRvKERhdGUubm93KCkpO1xuICAgICAgICB0YWJsZS5pbnRlZ2VyKFwidXBkYXRlZFwiKS5ub3ROdWxsYWJsZSgpLmRlZmF1bHRUbyhEYXRlLm5vdygpKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlZCB0YWJsZSBub3RlXCIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgY3JlYXRpbmcgdGFibGUgbm90ZVwiLCBlcnIpO1xuICAgICAgfSk7XG4gIH1cbn0pO1xuXG5pbXBvcnQgeyBOb3RlIH0gZnJvbSBcImtuZXgvdHlwZXMvdGFibGVzXCI7XG5cbmNvbnN0IGZldGNoTm90ZXMgPSBhc3luYyAoKSA9PiB7XG4gIHJldHVybiBhd2FpdCBkYihcIm5vdGVcIikuc2VsZWN0KFwiKlwiKTtcbn07XG5cbmNvbnN0IHVwZGF0ZU5vdGUgPSBhc3luYyAoXG4gIGlkOiBzdHJpbmcsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8Tm90ZT5cbik6IFByb21pc2U8Tm90ZT4gPT4ge1xuICByZXR1cm4gYXdhaXQgZGIoXCJub3RlXCIpXG4gICAgLndoZXJlKFwiaWRcIiwgaWQpXG4gICAgLnVwZGF0ZSh7XG4gICAgICAuLi51cGRhdGVzLFxuICAgICAgdXBkYXRlZDogRGF0ZS5ub3coKSxcbiAgICB9KTtcbn07XG5cbmNvbnN0IGRlbGV0ZU5vdGUgPSBhc3luYyAoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICByZXR1cm4gYXdhaXQgZGIoXCJub3RlXCIpLndoZXJlKFwiaWRcIiwgaWQpLmRlbCgpO1xufTtcblxuY29uc3QgY3JlYXRlTm90ZSA9IGFzeW5jICgpOiBQcm9taXNlPE5vdGU+ID0+IHtcbiAgY29uc3Qgbm90ZTogTm90ZSA9IHtcbiAgICBpZDogdXVpZHY0KCksXG4gICAgdGl0bGU6IFwiXCIsXG4gICAgY29udGVudDogXCJcIixcbiAgICBjcmVhdGVkOiBEYXRlLm5vdygpLFxuICAgIHVwZGF0ZWQ6IERhdGUubm93KCksXG4gIH07XG5cbiAgYXdhaXQgZGIoXCJub3RlXCIpLmluc2VydChub3RlKTtcbiAgcmV0dXJuIG5vdGU7XG59O1xuXG5jb25zdCBzYXZlTm90ZSA9IGFzeW5jIChcbiAgaWQ6IHN0cmluZyxcbiAgdXBkYXRlczogUGFydGlhbDxOb3RlPlxuKTogUHJvbWlzZTxOb3RlIHwgbnVsbD4gPT4ge1xuICBjb25zdCBub3RlID0gYXdhaXQgZ2V0Tm90ZShpZCk7XG4gIGlmICghbm90ZSkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgdXBkYXRlZE5vdGUgPSB7XG4gICAgLi4ubm90ZSxcbiAgICAuLi51cGRhdGVzLFxuICAgIHVwZGF0ZWQ6IERhdGUubm93KCksXG4gIH07XG5cbiAgYXdhaXQgZGIoXCJub3RlXCIpLndoZXJlKFwiaWRcIiwgaWQpLnVwZGF0ZSh1cGRhdGVkTm90ZSk7XG4gIHJldHVybiB1cGRhdGVkTm90ZTtcbn07XG5cbmNvbnN0IGdldE5vdGUgPSBhc3luYyAoaWQ6IHN0cmluZyk6IFByb21pc2U8Tm90ZSB8IG51bGw+ID0+IHtcbiAgY29uc3Qgbm90ZXM6IE5vdGVbXSA9IGF3YWl0IGRiKFwibm90ZVwiKS53aGVyZShcImlkXCIsIGlkKTtcbiAgcmV0dXJuIG5vdGVzLmxlbmd0aCA/IG5vdGVzWzBdIDogbnVsbDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHsgTm90ZXNBcGkgfTtcbiIsImltcG9ydCB7IGNvbnRleHRCcmlkZ2UgfSBmcm9tIFwiZWxlY3Ryb25cIjtcbmltcG9ydCBhcGkgZnJvbSBcIi4vYXBpXCI7XG5cbmNvbnRleHRCcmlkZ2UuZXhwb3NlSW5NYWluV29ybGQoXCJhcGlcIiwgYXBpKTtcblxuZnVuY3Rpb24gZG9tUmVhZHkoXG4gIGNvbmRpdGlvbjogRG9jdW1lbnRSZWFkeVN0YXRlW10gPSBbXCJjb21wbGV0ZVwiLCBcImludGVyYWN0aXZlXCJdXG4pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgaWYgKGNvbmRpdGlvbi5pbmNsdWRlcyhkb2N1bWVudC5yZWFkeVN0YXRlKSkge1xuICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgICBpZiAoY29uZGl0aW9uLmluY2x1ZGVzKGRvY3VtZW50LnJlYWR5U3RhdGUpKSB7XG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuY29uc3Qgc2FmZURPTSA9IHtcbiAgYXBwZW5kKHBhcmVudDogSFRNTEVsZW1lbnQsIGNoaWxkOiBIVE1MRWxlbWVudCkge1xuICAgIGlmICghQXJyYXkuZnJvbShwYXJlbnQuY2hpbGRyZW4pLmZpbmQoKGUpID0+IGUgPT09IGNoaWxkKSkge1xuICAgICAgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9LFxuICByZW1vdmUocGFyZW50OiBIVE1MRWxlbWVudCwgY2hpbGQ6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKEFycmF5LmZyb20ocGFyZW50LmNoaWxkcmVuKS5maW5kKChlKSA9PiBlID09PSBjaGlsZCkpIHtcbiAgICAgIHJldHVybiBwYXJlbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfSxcbn07XG5cbi8qKlxuICogaHR0cHM6Ly90b2JpYXNhaGxpbi5jb20vc3BpbmtpdFxuICogaHR0cHM6Ly9jb25ub3JhdGhlcnRvbi5jb20vbG9hZGVyc1xuICogaHR0cHM6Ly9wcm9qZWN0cy5sdWtlaGFhcy5tZS9jc3MtbG9hZGVyc1xuICogaHR0cHM6Ly9tYXRlamt1c3RlYy5naXRodWIuaW8vU3BpblRoYXRTaGl0XG4gKi9cbmZ1bmN0aW9uIHVzZUxvYWRpbmcoKSB7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IGBsb2FkZXJzLWNzc19fc3F1YXJlLXNwaW5gO1xuICBjb25zdCBzdHlsZUNvbnRlbnQgPSBgXG5Aa2V5ZnJhbWVzIHNxdWFyZS1zcGluIHtcbiAgMjUlIHsgdHJhbnNmb3JtOiBwZXJzcGVjdGl2ZSgxMDBweCkgcm90YXRlWCgxODBkZWcpIHJvdGF0ZVkoMCk7IH1cbiAgNTAlIHsgdHJhbnNmb3JtOiBwZXJzcGVjdGl2ZSgxMDBweCkgcm90YXRlWCgxODBkZWcpIHJvdGF0ZVkoMTgwZGVnKTsgfVxuICA3NSUgeyB0cmFuc2Zvcm06IHBlcnNwZWN0aXZlKDEwMHB4KSByb3RhdGVYKDApIHJvdGF0ZVkoMTgwZGVnKTsgfVxuICAxMDAlIHsgdHJhbnNmb3JtOiBwZXJzcGVjdGl2ZSgxMDBweCkgcm90YXRlWCgwKSByb3RhdGVZKDApOyB9XG59XG4uJHtjbGFzc05hbWV9ID4gZGl2IHtcbiAgYW5pbWF0aW9uLWZpbGwtbW9kZTogYm90aDtcbiAgd2lkdGg6IDUwcHg7XG4gIGhlaWdodDogNTBweDtcbiAgYmFja2dyb3VuZDogI2ZmZjtcbiAgYW5pbWF0aW9uOiBzcXVhcmUtc3BpbiAzcyAwcyBjdWJpYy1iZXppZXIoMC4wOSwgMC41NywgMC40OSwgMC45KSBpbmZpbml0ZTtcbn1cbi5hcHAtbG9hZGluZy13cmFwIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDB2dztcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGJhY2tncm91bmQ6ICMyODJjMzQ7XG4gIHotaW5kZXg6IDk7XG59XG4gICAgYDtcbiAgY29uc3Qgb1N0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBjb25zdCBvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICBvU3R5bGUuaWQgPSBcImFwcC1sb2FkaW5nLXN0eWxlXCI7XG4gIG9TdHlsZS5pbm5lckhUTUwgPSBzdHlsZUNvbnRlbnQ7XG4gIG9EaXYuY2xhc3NOYW1lID0gXCJhcHAtbG9hZGluZy13cmFwXCI7XG4gIG9EaXYuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCIke2NsYXNzTmFtZX1cIj48ZGl2PjwvZGl2PjwvZGl2PmA7XG5cbiAgcmV0dXJuIHtcbiAgICBhcHBlbmRMb2FkaW5nKCkge1xuICAgICAgc2FmZURPTS5hcHBlbmQoZG9jdW1lbnQuaGVhZCwgb1N0eWxlKTtcbiAgICAgIHNhZmVET00uYXBwZW5kKGRvY3VtZW50LmJvZHksIG9EaXYpO1xuICAgIH0sXG4gICAgcmVtb3ZlTG9hZGluZygpIHtcbiAgICAgIHNhZmVET00ucmVtb3ZlKGRvY3VtZW50LmhlYWQsIG9TdHlsZSk7XG4gICAgICBzYWZlRE9NLnJlbW92ZShkb2N1bWVudC5ib2R5LCBvRGl2KTtcbiAgICB9LFxuICB9O1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IHsgYXBwZW5kTG9hZGluZywgcmVtb3ZlTG9hZGluZyB9ID0gdXNlTG9hZGluZygpO1xuZG9tUmVhZHkoKS50aGVuKGFwcGVuZExvYWRpbmcpO1xuXG53aW5kb3cub25tZXNzYWdlID0gKGV2KSA9PiB7XG4gIGV2LmRhdGEucGF5bG9hZCA9PT0gXCJyZW1vdmVMb2FkaW5nXCIgJiYgcmVtb3ZlTG9hZGluZygpO1xufTtcblxuc2V0VGltZW91dChyZW1vdmVMb2FkaW5nLCA0OTk5KTtcbiJdLCJuYW1lcyI6WyJ1dWlkdjQiLCJjb250ZXh0QnJpZGdlIl0sIm1hcHBpbmdzIjoiOzs7QUFrQkEsTUFBTSxhQUFhLFlBQVk7QUFDN0IsU0FBTyxNQUFNLEdBQUcsTUFBTSxFQUFFLE9BQU8sR0FBRztBQUNwQztBQUVBLE1BQU0sYUFBYSxPQUNqQixJQUNBLFlBQ2tCO0FBQ1gsU0FBQSxNQUFNLEdBQUcsTUFBTSxFQUNuQixNQUFNLE1BQU0sRUFBRSxFQUNkLE9BQU87QUFBQSxJQUNOLEdBQUc7QUFBQSxJQUNILFNBQVMsS0FBSyxJQUFJO0FBQUEsRUFBQSxDQUNuQjtBQUNMO0FBRUEsTUFBTSxhQUFhLE9BQU8sT0FBaUM7QUFDbEQsU0FBQSxNQUFNLEdBQUcsTUFBTSxFQUFFLE1BQU0sTUFBTSxFQUFFLEVBQUU7QUFDMUM7QUFFQSxNQUFNLGFBQWEsWUFBMkI7QUFDNUMsUUFBTSxPQUFhO0FBQUEsSUFDakIsSUFBSUEsS0FBQUEsR0FBTztBQUFBLElBQ1gsT0FBTztBQUFBLElBQ1AsU0FBUztBQUFBLElBQ1QsU0FBUyxLQUFLLElBQUk7QUFBQSxJQUNsQixTQUFTLEtBQUssSUFBSTtBQUFBLEVBQUE7QUFHcEIsUUFBTSxHQUFHLE1BQU0sRUFBRSxPQUFPLElBQUk7QUFDckIsU0FBQTtBQUNUO0FBRUEsTUFBTSxXQUFXLE9BQ2YsSUFDQSxZQUN5QjtBQUNuQixRQUFBLE9BQU8sTUFBTSxRQUFRLEVBQUU7QUFDN0IsTUFBSSxDQUFDO0FBQWEsV0FBQTtBQUVsQixRQUFNLGNBQWM7QUFBQSxJQUNsQixH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
